
<?xml version="1.0" encoding="UTF-8"?>
<TEI xmlns="http://www.tei-c.org/ns/1.0" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xsi:schemaLocation="http://www.tei-c.org/ns/1.0 /home/joey/Project/grobid/grobid-home/schemas/xsd/Grobid.xsd"
 xmlns:xlink="http://www.w3.org/1999/xlink">
	<teiHeader xml:lang="en">
		<encodingDesc>
			<appInfo>
				<application version="0.4.2-SNAPSHOT" ident="GROBID" when="2017-08-10T23:48+0000">
					<ref target="https://github.com/kermitt2/grobid">GROBID - A machine learning software for extracting information from scholarly documents</ref>
				</application>
			</appInfo>
		</encodingDesc>
		<fileDesc>
			<titleStmt>
				<title level="a" type="main">Genome analysis nestly—a framework for running software with nested parameter choices and aggregating results</title>
			</titleStmt>
			<publicationStmt>
				<publisher/>
				<availability status="unknown"><licence/></availability>
				<date type="published" when="2013">2013</date>
			</publicationStmt>
			<sourceDesc>
				<biblStruct>
					<analytic>
						<author role="corresp">
							<persName>
								<forename type="first">Connor</forename>
								<forename type="middle">O</forename>
								<surname>Mccoy</surname>
							</persName>
							<email>Contact: cmccoy@fhcrc.org or matsen@fhcrc.org</email>
							<affiliation key="aff0">
								<orgName type="department">Program in Computational Biology</orgName>
								<orgName type="institution">Fred Hutchinson Cancer Research Center</orgName>
								<address>
									<postCode>98109</postCode>
									<settlement>Seattle</settlement>
									<region>WA</region>
									<country key="US">USA</country>
								</address>
							</affiliation>
						</author>
						<author>
							<persName>
								<forename type="first">Aaron</forename>
								<surname>Gallagher</surname>
							</persName>
							<affiliation key="aff0">
								<orgName type="department">Program in Computational Biology</orgName>
								<orgName type="institution">Fred Hutchinson Cancer Research Center</orgName>
								<address>
									<postCode>98109</postCode>
									<settlement>Seattle</settlement>
									<region>WA</region>
									<country key="US">USA</country>
								</address>
							</affiliation>
						</author>
						<author>
							<persName>
								<forename type="first">Noah</forename>
								<forename type="middle">G</forename>
								<surname>Hoffman</surname>
							</persName>
							<affiliation key="aff0">
								<orgName type="department">Program in Computational Biology</orgName>
								<orgName type="institution">Fred Hutchinson Cancer Research Center</orgName>
								<address>
									<postCode>98109</postCode>
									<settlement>Seattle</settlement>
									<region>WA</region>
									<country key="US">USA</country>
								</address>
							</affiliation>
						</author>
						<author>
							<persName>
								<forename type="first">Frederick</forename>
								<forename type="middle">A</forename>
								<surname>Matsen</surname>
							</persName>
							<affiliation key="aff0">
								<orgName type="department">Program in Computational Biology</orgName>
								<orgName type="institution">Fred Hutchinson Cancer Research Center</orgName>
								<address>
									<postCode>98109</postCode>
									<settlement>Seattle</settlement>
									<region>WA</region>
									<country key="US">USA</country>
								</address>
							</affiliation>
						</author>
						<author>
							<persName>
								<forename type="first">Alfonso</forename>
								<surname>Valencia</surname>
							</persName>
							<affiliation key="aff1">
								<orgName type="department">Department of Laboratory Medicine</orgName>
								<orgName type="institution">University of Washington</orgName>
								<address>
									<postCode>98195</postCode>
									<settlement>Seattle</settlement>
									<region>WA</region>
									<country key="US">USA</country>
								</address>
							</affiliation>
						</author>
						<title level="a" type="main">Genome analysis nestly—a framework for running software with nested parameter choices and aggregating results</title>
					</analytic>
					<monogr>
						<imprint>
							<biblScope unit="volume">29</biblScope>
							<biblScope unit="issue">3</biblScope>
							<biblScope unit="page" from="387" to="388"/>
							<date type="published" when="2013">2013</date>
						</imprint>
					</monogr>
					<idno type="DOI">10.1093/bioinformatics/bts696</idno>
					<note type="submission">Received on June 7, 2012; revised on November 9, 2012; accepted on November 29, 2012</note>
					<note>Associate Editor:</note>
				</biblStruct>
			</sourceDesc>
		</fileDesc>
		<profileDesc>
			<abstract>
				<p>The execution of a software application or pipeline using various combinations of parameters and inputs is a common task in bioinformatics. In the absence of a specialized tool to organize, streamline and formalize this process, scientists must write frequently complex scripts to perform these tasks. We present nestly, a Python package to facilitate running tools with nested combinations of parameters and inputs. nestly provides three components. First, a module to build nested directory structures corresponding to choices of parameters. Second, the nestrun script to run a given command using each set of parameter choices. Third, the nestagg script to aggregate results of the individual runs into a CSV file, as well as support for more complex aggregation. We also include a module for easily specifying nested dependencies for the SCons build tool, enabling incremental builds. Availability: Source, documentation and tutorial examples are available at http://github.com/fhcrc/nestly. nestly can be installed from the Python Package Index via pip; it is open source (MIT license).</p>
			</abstract>
		</profileDesc>
	</teiHeader>
	<text xml:lang="en">
		<body>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="1">INTRODUCTION</head><p>Many types of bioinformatics analyses involve running software or pipelines with a combination of a number of different parameters and inputs. For example, one may want to use an established algorithm such as BLAST with many combinations of different parameters, or benchmark the accuracy and speed of a new algorithm for all possible settings for a number of parameters. While a number of tools are available for streamlining bioinformatics pipelines (<ref type="bibr" target="#b1">Goodstadt, 2010</ref>; Ko¨sterKo¨ster and<ref type="bibr" target="#b3">Rahmann, 2012;</ref><ref type="bibr" target="#b5">Sadedin et al., 2012</ref>), these tools emphasize running a dataset through a workflow with a static parameter regime. The task of running software with a variety of settings typically involves enumeration of parameters, execution of a command for each combination and aggregation of results. Despite the ubiquity of this sort of task in bioinformatics, we are only aware of software packages that address it for specific bioinformatics problems (<ref type="bibr" target="#b0">Darriba et al., 2012;</ref><ref type="bibr" target="#b2">Hoekman et al., 2012</ref>). The most common solution is to write a custom script to perform the tasks, which presents difficulties: isolating execution, running commands in parallel and merging results with associated parameters can be non-trivial. Managing these tasks in one-off code creates additional work for researchers, introduces potential for error and hinders reproducibility. We have designed a Python software package, nestly, the purpose of which is to streamline and automate these operations.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="2">IMPLEMENTATION</head><p>nestly streamlines, organizes and automates running programs with combinatorial parameter choices. Users write a script using nestly's Python API for generating parameter choices. This API makes expressing combinatorial choices trivial; arbitrary logic may be used for more complex cases. Once parameters have been selected, nestly organizes choices in a nested directory structure, providing an isolated environment in which to run bioinformatics software for each combination. Parameter choices are recorded in JSON files in leaf directories. The nestrun tool facilitates running a command for each parameter combination in parallel. Commands are executed within a shell, using a simple syntax for parameter substitution. The user can therefore create a direct call to a bioinformatics program for each combination, or a script written in an arbitrary language. For the common case of programs with comma-and tab-delimited outputs, the nestagg tool aggregates results from the nested directory structure, appending the parameters used to generate the results to each row. For incremental builds, we also provide SCons integration, allowing concise specification of nested dependencies. The nestly SCons module provides methods for adding a target for every combination of parameters, and aggregating across these targets once they have been created or updated. This feature has been particularly useful for avoiding the repeated execution of time-consuming upstream steps when developing downstream components of an analysis.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="3">EXAMPLE OF USE</head></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="3.1">Enumerating combinations</head><p>As an example, we use nestly to set up a comparison of two implementations of an algorithm to prune leaves from a phylogenetic tree to minimize an objective function (<ref type="bibr" target="#b4">Matsen et al., 2012</ref>). The 'full' implementation solves the problem exactly, while the 'pam' implementation uses a heuristic. We wish to *To whom correspondence should be addressed.n ¼ Nest() n.add('algorithm', ['full',<ref type="bibr">'pam']</ref>) n.add('tree', glob.glob('/trees/*.tre'), label_func ¼ stripext) n.add('k',<ref type="bibr">[50,</ref><ref type="bibr">100,</ref><ref type="bibr">250,</ref><ref type="bibr">500,</ref><ref type="bibr">750,</ref><ref type="bibr">900,</ref><ref type="bibr">950]</ref>) n.build('runs') This will do the following. It will create a runs directory, in which there will be two subdirectories, full and pam. Within each of these, there will be directories labeled with the name of the tree. Within each of those, there will be directories for each value of 'k', e.g. 50, 100, etc. Within each of those, there will be a JSON file control.json, which contains the parameter values corresponding to the directory hierarchy. This example exhibits nestly on a parameter 'Cartesian product'; online examples show how to use it to build a more complex subset.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="3.2">Running a command</head><p>The JSON files thus created then serve as inputs to nestrun for template substitution, for example: nestrun-d runs-template ¼ 'rppr min_adcl_tree {tree}-algorithm {algorithm}-all-adcls-file adcls.csv</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head>leaves {k}'</head><p>This command runs rppr min_adcl_tree in all of the tip directories with the appropriate values for each parameter, for example substituting 100 in place of {k} above. The results we are interested in (-all-adcls-file) will be written to a file named adcls.csv in each directory. nestrun can run a user-specified number of jobs in parallel.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="3.3">Aggregating results</head><p>Given a list of JSON files and the name of the delimited files to combine, nestagg merges the results together into a single file, adding columns that label the parameter choices used when generating those results. The call: nestagg delim adcls.csv-d runs-o all_adcls.csv will aggregate data from all of the CSV files named adcl.csv, one for each control file under runs, appending columns containing the values of algorithm, tree and k from the control file. For more general cases, a simple framework is available for defining custom aggregations.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="3.4">SCons integration</head><p>SCons (http://scons.org) is a build system implemented in Python that is analogous to make, in that an invocation only runs what is necessary to fulfill specified dependencies. Our nestly integration makes it easy to define targets for each parameter combination that also become part of the control dictionary. For example, by including the code from Section 3.1 in an SConstruct file, we can add our command (abbreviated here): from nestly.scons import SConsWrap w ¼ SConsWrap(nest, 'build') @w.add_target() def min_adcl(d, control): # set SCons 'action' to template as done # above using values from 'control' return Command(os.path.join(d, 'adcl.csv'), c<ref type="bibr">['tree']</ref>, action) This will execute the same combination of commands as before, but within the incremental build framework of the SCons build tool. The result of this step is then available via the control dictionary for future steps. The SCons integration also has facilities for aggregating results, described in the nestly documentation.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="4">CONCLUSION</head><p>nestly is a simple yet powerful framework for running software with combinatorial choices of parameters and aggregating results of those runs. It has complete documentation and a suite of examples.</p></div><figure xmlns="http://www.tei-c.org/ns/1.0" type="table" xml:id="tab_0" validated="false"><figDesc>ß The Author 2012. Published by Oxford University Press. All rights reserved. For Permissions, please email: journals.permissions@oup.com run both algorithms on several 1000-leaf trees, varying the number of leaves pruned from the trees ('k'). To set up a nested directory structure: import glob from nestly import Nest, stripext</figDesc><table></table></figure>

			<note place="foot">at :: on August 30, 2016 http://bioinformatics.oxfordjournals.org/ Downloaded from</note>

			<note place="foot">C.O.McCoy et al. at :: on August 30, 2016 http://bioinformatics.oxfordjournals.org/ Downloaded from</note>
		</body>
		<back>

			<div type="acknowledgement">
<div xmlns="http://www.tei-c.org/ns/1.0"><head>ACKNOWLEDGEMENTS</head><p>We thank Brian Hodges for contributing to the first version of nestrun, and to Brad Chapman and two anonymous reviewers for valuable comments on this manuscript.</p></div>
			</div>

			<div type="references">

				<listBibl>

<biblStruct   xml:id="b0">
	<analytic>
		<title level="a" type="main">jModelTest 2: more models, new heuristics and parallel computing</title>
		<author>
			<persName>
				<forename type="first">D</forename>
				<surname>Darriba</surname>
			</persName>
		</author>
	</analytic>
	<monogr>
		<title level="j">Nat. Methods</title>
		<imprint>
			<biblScope unit="volume">9</biblScope>
			<biblScope unit="page" from="772" to="772" />
			<date type="published" when="2012" />
		</imprint>
	</monogr>
</biblStruct>

<biblStruct   xml:id="b1">
	<analytic>
		<title level="a" type="main">Ruffus: a lightweight python library for computational pipelines</title>
		<author>
			<persName>
				<forename type="first">L</forename>
				<surname>Goodstadt</surname>
			</persName>
		</author>
	</analytic>
	<monogr>
		<title level="j">Bioinformatics</title>
		<imprint>
			<biblScope unit="volume">26</biblScope>
			<biblScope unit="page" from="2778" to="2779" />
			<date type="published" when="2010" />
		</imprint>
	</monogr>
</biblStruct>

<biblStruct   xml:id="b2">
	<analytic>
		<title level="a" type="main">msCompare: a framework for quantitative analysis of label-free LC-MS data for comparative biomarker studies</title>
		<author>
			<persName>
				<forename type="first">B</forename>
				<surname>Hoekman</surname>
			</persName>
		</author>
	</analytic>
	<monogr>
		<title level="j">Mol. Cell. Proteomics</title>
		<imprint>
			<biblScope unit="issue">11</biblScope>
			<biblScope unit="page" from="111" to="015974" />
			<date type="published" when="2012" />
		</imprint>
	</monogr>
</biblStruct>

<biblStruct   xml:id="b3">
	<analytic>
		<title level="a" type="main">Snakemake–a scalable bioinformatics workflow engine</title>
		<author>
			<persName>
				<forename type="first">J</forename>
				<surname>Ko¨sterko¨ster</surname>
			</persName>
		</author>
		<author>
			<persName>
				<forename type="first">S</forename>
				<surname>Rahmann</surname>
			</persName>
		</author>
	</analytic>
	<monogr>
		<title level="j">Bioinformatics</title>
		<imprint>
			<biblScope unit="volume">28</biblScope>
			<biblScope unit="page" from="2520" to="2522" />
			<date type="published" when="2012" />
		</imprint>
	</monogr>
</biblStruct>

<biblStruct   xml:id="b4">
	<analytic>
		<title level="a" type="main">Minimizing the average distance to a closest leaf in a phylogenetic tree</title>
		<author>
			<persName>
				<forename type="first">F</forename>
				<forename type="middle">A</forename>
				<surname>Matsen</surname>
			</persName>
		</author>
	</analytic>
	<monogr>
		<title level="j">Syst. Biol</title>
		<imprint>
			<date type="published" when="2012" />
		</imprint>
	</monogr>
	<note>in. press</note>
</biblStruct>

<biblStruct   xml:id="b5">
	<analytic>
		<title level="a" type="main">Bpipe: a tool for running and managing bioinformatics pipelines</title>
		<author>
			<persName>
				<forename type="first">S</forename>
				<forename type="middle">P</forename>
				<surname>Sadedin</surname>
			</persName>
		</author>
	</analytic>
	<monogr>
		<title level="j">Bioinformatics</title>
		<imprint>
			<biblScope unit="volume">28</biblScope>
			<biblScope unit="page" from="1525" to="1526" />
			<date type="published" when="2012" />
		</imprint>
	</monogr>
</biblStruct>

				</listBibl>
			</div>
		</back>
	</text>
</TEI>